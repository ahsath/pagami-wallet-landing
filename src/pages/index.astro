---
import Shell from "../layout/shell.astro";
import Refills from "../components/Refills.astro";
import Change from "../components/Change.astro";
import Offerings from "../components/Offerings.astro";
import Withdraws from "../components/Withdraws.astro";
import PayStory from "../components/pay-story/index.astro";
import SmartPaymentButtons from "../components/SmartPaymentButtons.astro";
import LandPresale from "../components/LandPresale.astro";
import Footer from "../components/Footer.astro";
---

<Shell>
    <Refills />
    <Change />
    <Offerings />
    <Withdraws />
    <PayStory />
    <SmartPaymentButtons />
    <LandPresale />
    <Footer />
</Shell>

<script>
    import gsap from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.querySelectorAll("[data-gsap-trigger]").forEach((trigger) => {
        const tl = gsap.timeline();
        ScrollTrigger.create({ animation: tl, trigger, start: "top 80%", toggleActions: "play none none reverse" });

        for (const child of trigger.children) {
            if (child.hasAttribute("data-gsap-animate")) {
                tl.add(gsap.from(child, { y: 10, opacity: 0 }));
            }
        }

        if (trigger.hasAttribute("data-gsap-animate")) {
            tl.add(gsap.from(trigger, { y: 10, opacity: 0 }));
        }
    });
</script>
